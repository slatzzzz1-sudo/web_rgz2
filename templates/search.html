{% extends "base.html" %}

{% block title %}–ü–æ–∏—Å–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤ - –†–µ—Ü–µ–ø—Ç—ã{% endblock %}

{% block content %}
<div class="search-page">
    <h2>üîç –ü–æ–∏—Å–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤</h2>
    
<form method="POST" action="{{ url_for('search') }}" class="search-form">
    <div class="form-group">
        <label>–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Ä–µ—Ü–µ–ø—Ç–∞:</label>
        <input type="text" name="keyword" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: –±–æ—Ä—â, –ø–∞—Å—Ç–∞" value="{{ keyword|default('') }}">
    </div>

    <div class="form-group">
        <label>–ü–æ–∏—Å–∫ –ø–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞–º (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</label>
        <input type="text" name="ingredients" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: –∫—É—Ä–∏—Ü–∞, —Ä–∏—Å, –º–æ—Ä–∫–æ–≤—å" value="{{ ingredients|default('') }}">
    </div>

    <div class="form-group">
        <label>–†–µ–∂–∏–º –ø–æ–∏—Å–∫–∞ –ø–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞–º:</label>
        <select name="mode">
            <option value="any" {% if mode == 'any' or not mode %}selected{% endif %}>–•–æ—Ç—è –±—ã –æ–¥–∏–Ω –∏–∑ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤</option>
            <option value="all" {% if mode == 'all' %}selected{% endif %}>–í—Å–µ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ</option>
        </select>
    </div>

    <button type="submit" class="btn btn-primary">üîç –ù–∞–π—Ç–∏ —Ä–µ—Ü–µ–ø—Ç—ã</button>
</form>

    {% if recipes %}
        <h3>–ù–∞–π–¥–µ–Ω–æ —Ä–µ—Ü–µ–ø—Ç–æ–≤: {{ recipes|length }}</h3>
        <div class="recipes-grid">
            {% for recipe in recipes %}
            <div class="recipe-card">
                {% if recipe.image_path %}
                <img src="{{ url_for('static', filename='images/' + recipe.image_path) }}" alt="{{ recipe.title }}">
                {% else %}
                <div class="no-image">üç≥</div>
                {% endif %}
                <h3>{{ recipe.title }}</h3>
                <p>{{ recipe.description|default('', true)|truncate(100) }}</p>
                <a href="{{ url_for('recipe_detail', recipe_id=recipe.id) }}" class="btn">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
            </div>
            {% endfor %}
        </div>
    {% elif request.method == 'POST' %}
        <p style="color: #888; font-style: italic;">üòî –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å.</p>
    {% endif %}
</div>

<style>
.search-form { max-width: 700px; margin: 0 auto 40px; }
.form-group { margin-bottom: 20px; }
.form-group label { display: block; margin-bottom: 8px; font-weight: 600; }
.form-group input, .form-group select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; font-size: 16px; }
</style>
{% endblock %}