{% extends "base.html" %}

{% block title %}–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å - –†–µ—Ü–µ–ø—Ç—ã{% endblock %}

{% block content %}
<h2>‚öôÔ∏è –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h2>

<h3>üìù –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ä–µ—Ü–µ–ø—Ç</h3>
<form method="POST" action="{{ url_for('add_recipe') }}" class="form-container">
    <div class="form-group">
        <label>–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
        <input type="text" name="title" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ë–æ—Ä—â –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π">
    </div>

    <div class="form-group">
        <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
        <textarea name="description" rows="3" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –±–ª—é–¥–∞..."></textarea>
    </div>

    <div class="form-row">
        <div class="form-group" style="width: 48%;">
            <label>–í—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è (–º–∏–Ω):</label>
            <input type="number" name="cooking_time" min="1" required>
        </div>
        <div class="form-group" style="width: 48%;">
            <label>–ü–æ—Ä—Ü–∏–∏:</label>
            <input type="number" name="servings" min="1" value="4" required>
        </div>
    </div>

    <div class="form-row">
        <div class="form-group" style="width: 48%;">
            <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
            <select name="category_id" required>
                {% for cat in categories %}
                <option value="{{ cat.id }}">{{ cat.name }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group" style="width: 48%;">
            <label>–ö–∞—Ä—Ç–∏–Ω–∫–∞ (–∏–º—è —Ñ–∞–π–ª–∞ –≤ static/images/):</label>
            <input type="text" name="image_path" placeholder="borsch.jpg">
        </div>
    </div>

    <div class="form-group">
        <label>–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã (—Ñ–æ—Ä–º–∞—Ç: –ù–∞–∑–≤–∞–Ω–∏–µ –µ–¥–∏–Ω–∏—Ü–∞:–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ; ...):</label>
        <textarea name="ingredients" rows="4" placeholder="–ü—Ä–∏–º–µ—Ä: –∫—É—Ä–∏—Ü–∞ g:500; —Ä–∏—Å g:200; –º–æ—Ä–∫–æ–≤—å pcs:2; –ª—É–∫ pcs:1"></textarea>
        <small>–ü—Ä–∏–º–µ—Ä: –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å g:400; —Å–≤–µ–∫–ª–∞ pcs:2; –∫–∞–ø—É—Å—Ç–∞ g:300</small>
    </div>

    <div class="form-group">
        <label>–®–∞–≥–∏ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è (–ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ —Å—Ç—Ä–æ–∫—É, —á–µ—Ä–µ–∑ ;):</label>
        <textarea name="steps" rows="5" placeholder="–ù–∞—Ä–µ–∑–∞—Ç—å –æ–≤–æ—â–∏; –û–±–∂–∞—Ä–∏—Ç—å –ª—É–∫; –î–æ–±–∞–≤–∏—Ç—å –º—è—Å–æ –∏ —Ç—É—à–∏—Ç—å..."></textarea>
        <small>–†–∞–∑–¥–µ–ª—è–π—Ç–µ —à–∞–≥–∏ —Ç–æ—á–∫–æ–π —Å –∑–∞–ø—è—Ç–æ–π: –®–∞–≥ 1; –®–∞–≥ 2; –®–∞–≥ 3</small>
    </div>

    <button type="submit" class="btn btn-primary">‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç</button>
</form>

<hr style="margin: 50px 0;">

<h3>üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Ä–µ—Ü–µ–ø—Ç–∞–º–∏</h3>
<div class="recipes-grid">
    {% for recipe in recipes %}
    <div class="recipe-card admin-recipe">
        {% if recipe.image_path %}
        <img src="{{ url_for('static', filename='images/' + recipe.image_path) }}" alt="{{ recipe.title }}">
        {% else %}
        <div class="no-image">üç≤</div>
        {% endif %}
        <h4>{{ recipe.title }}</h4>
        <p><strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong> {{ recipe.category_name }}</p>
        <p>{{ recipe.description|default('', true)|truncate(120) }}</p>
        
        <div class="admin-actions">
            <a href="{{ url_for('edit_recipe', recipe_id=recipe.id) }}" class="btn btn-edit">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
            <form method="POST" action="{{ url_for('delete_recipe', recipe_id=recipe.id) }}" style="display: inline;">
                <button type="submit" class="btn btn-danger" onclick="return confirm('–¢–æ—á–Ω–æ —É–¥–∞–ª–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç ¬´{{ recipe.title }}¬ª?')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
            </form>
        </div>
    </div>
    {% endfor %}
</div>

<style>
.form-container { max-width: 900px; margin: 0 auto 40px; }
.form-group small { display: block; margin-top: 6px; color: #666; font-style: italic; }
.admin-actions { margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap; }
.btn-edit { background: #4299e1; }
.btn-edit:hover { background: #3182ce; }
.admin-recipe { position: relative; padding-bottom: 80px; }
.admin-actions { position: absolute; bottom: 15px; left: 15px; right: 15px; }
</style>
{% endblock %}
